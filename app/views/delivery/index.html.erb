<a href="/">Delivery Tracker</a> | <a href="users/edit">Edit profile</a> | <a href="users/sign_out">Sign out</a>
<hr>
<% if flash[:notice] %>
  <div class="notice"><%= flash[:notice] %></div>
<% end %>

<div>
 <h1>
   Delivery Tracker
 </h1>
</div>


<div>Know if something gets lost in the mail.</div>
<hr>


<div>
 <div>
   <h2>
     Expecting a package?
   <h2>
 </div>


 <% if current_user != nil %>
 <form action="insert_delivery" method="post">
   <div>
     <label for="description_box">
         Description
     </label>
     <input type="text" id="description_box" name="query_description">
   </div>


   <div>
     <label for="date_box">
       Supposed to arrive on
     </label>
     <input type="date" id="date_box" name="query_date">
   </div>


   <div>
     <label for="details_box">
         Details
     </label>
     <textarea id="details_box" name="query_details" rows="3"></textarea>
   </div>


   <button>
     Log delivery
   </button>
 </form>
 <% end %>
</div>
<hr>


<div class="waiting_on">
 <div>
   <h2>
     Waiting on
   </h2>
 </div>


 <ul>
 <% @deliveries.each do |delivery| %>
   <% if delivery.arrived == false %>
   <li>
     <%= delivery.description %><br>
     Supposed to arrive on <%= delivery.supposed_to_arrive_on %><br>
     <% if delivery.details != nil %>
       <%= delivery.details %><br>
     <% end %>
     <form action="/modify_delivery/<%=delivery.id%>" method="post">
      <input type="hidden" name="arrived" value="true">

      <button>Mark as received</button>
    </form>
   </li>
   <% end %>
 <% end %>
 </ul>
</div>


<div class="received">
 <div>
   <h2>
     Received
   </h2>
 </div>


 <ul>
 <% @deliveries.each do |delivery| %>
   <% if delivery.arrived %>
   <li>
     <%= delivery.description %><br>
     Updated <%= delivery.updated_at %> <a href="/delete_delivery/<%=delivery.id%>">Delete</a>
   </li>
   <% end %>
 <% end %>
 </ul>
</div>
